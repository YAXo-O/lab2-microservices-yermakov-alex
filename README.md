## Billing Service

### О чём это
Сервис, позволяющий группе определить, кто из её участников кому сколько
должен. Представим ситуацию, когда группа людей сходила в кафе, и за всех
заплатил один человек. В случае, когда такое происходит единожды,
рассчитаться между собой не очень трудно. Однако, если группа собирается
в кафе раз в неделю, необходимо постоянно вести учёт "должников".
Возможны ситуации, когда кто-то из группы пропускает поход в кафе, что
также может внести путаницу в расчёты. Сервис берёт на себя все
вычисления - пользователю остаётся лишь внести входные данные.

### Детали реализации
#### Сущности
Для реализации сервиса выделим следующие сущности:
* Пользователь - пользователь системы
* Потребитель - человек, который принимает участие в событие и платит
либо платит за всех участников события, либо по итогам события остаётся
должен пользователю, который заплатил
* Событие - любое возможное событие, на которое собирается группа людей.
У события должен быть человек, который его оплатил
* Трата - информация о конкретной трате потребителя в рамках события
* Сессия - одно или несколько событий, в которых принимает участие одна
группа людей. Событиями могут быть: еженедельная аренда футбольного поля,
поездка на несколько дней в Питер и т.д. В любом событии сессии может
принимать участие только тот потребитель, который прикреплён к данной
сессии, однако не все участники сессии обязательно участвуют во всех
событиях сессии

##### Пользователь
|  id | Логин | Hash-пароля | Дата регистрации |
| --- | ----- | ----------- | ---------------- |
| uuid|  text |        text |         DateTime |

#### Сессия
|  id | Администратор | Дата создания |
| --- | ------------- | ------------- |
| uuid|           uui |      DateTime |

#### Потребитель
|  id | Сессия |
| --- | ------ |
| uuid|   uuid |

#### Событие
|   id | Инвестор |
| ---- | -------- |
| uuid |     uuid |

#### Трата
|   id | Событие | Потребитель |  Лот | Стоимость |
| ---- | ------- | ----------- | ---- | --------- |
| uuid |    uuid |        uuid | text |    number |

#### Различие между Пользователем и Потребителем
Пользователь - это глобальный пользователь системы. Потребитель - это
единица, используемая для расчёта долга в рамках сессии. 
У сессии всегда должен быть один пользователь - человек, который
вносит данные об очередном событии. Также в сессии может быть любое
количество потребителей.

#### Связи между сущеностями
* Пользователь - Сессия (один ко многим)
* Сессия - Потребитель (один ко многим)
* Событие - Потребитель (один ко многим)
* Событие - Трата (один ко многим)
* Трата - Потребитель (один к одному)

### Запросы
---
/api/users/registration - регистрация пользователя  
Method - POST  

JSON-параметры

| login | password |
| ----- | -------- |
|  text |     text |

JSON-ответ

|     id |  login | dateCreated |
| ------ | ------ | ----------- |
| number | string |      number |

---
/api/users/authentication - авторизация пользователя  
Method - POST

JSON - параметры

| login | password |
| ----- | -------- |
|  text |     text |

JSON - ответ

|     id |
| ------ |
| number |

---

/api/users/<page> - получить список пользователей  
Method - GET

URL - параметры  
page - номер страницы (для пагинации)

JSON - ответ  
|  login | dateCreated |
| ------ | ----------- |
| string |      number |

---

/api/users/<id> - удалить пользователя  
Method - DELETE

URL - параметры  
id - uuid удаляемого пользователя

* Пользователь может удалить только сам себя
* Все связанные с пользователем сессии будут удалены

---

### Примечения
В текущей версии для аутентификации используется id пользователя

